<mat-card class="task-form">
  <mat-card-content>
    <form
      [formGroup]="taskForm"
      (submit)="submitTaskForm(taskForm.value)"
      (reset)="resetTaskForm()"
    >
      <div *ngIf="!taskForm.value.isParentTask">
        <mat-form-field>
          <mat-label>Project</mat-label>
          <input matInput formControlName="project" readonly />
        </mat-form-field>

        <button
          mat-raised-button
          color="primary"
          type="button"
          (click)="searchProject()"
          class="margin-left-small"
        >
          Search
        </button>

        <br />
      </div>

      <div *ngIf="!taskForm.value.isParentTask">
        <mat-form-field>
          <mat-label>Task</mat-label>
          <input matInput formControlName="task" />
        </mat-form-field>

        <br />
      </div>

      <mat-checkbox formControlName="isParentTask">Parent Task</mat-checkbox>

      <br />

      <div *ngIf="!taskForm.value.isParentTask">
        <mat-label>Priority</mat-label>
        <mat-slider
          min="0"
          max="30"
          step="1"
          formControlName="priority"
          thumbLabel
          tickInterval="1"
        ></mat-slider>

        <br />
      </div>

      <mat-form-field>
        <mat-label>Parent Task</mat-label>
        <input
          matInput
          formControlName="parentTask"
          [readonly]="!taskForm.value.isParentTask"
        />
      </mat-form-field>

      <span *ngIf="!taskForm.value.isParentTask">
        <button
          mat-raised-button
          color="primary"
          type="button"
          (click)="searchParentTask()"
          class="margin-left-small"
        >
          Search
        </button>

        <br />
      </span>

      <div *ngIf="!taskForm.value.isParentTask">
        <mat-form-field>
          <mat-label>Start Date</mat-label>
          <input
            matInput
            [matDatepicker]="startDatePicker"
            formControlName="startDate"
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="startDatePicker"
          ></mat-datepicker-toggle>
          <mat-datepicker #startDatePicker></mat-datepicker>
        </mat-form-field>
        <mat-form-field class="margin-left-medium">
          <mat-label>End Date</mat-label>
          <input
            matInput
            [matDatepicker]="endDatePicker"
            formControlName="endDate"
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="endDatePicker"
          ></mat-datepicker-toggle>
          <mat-datepicker #endDatePicker></mat-datepicker>
        </mat-form-field>

        <br />
      </div>

      <div *ngIf="!taskForm.value.isParentTask">
        <mat-form-field>
          <mat-label>User</mat-label>
          <input matInput formControlName="user" readonly />
        </mat-form-field>

        <button
          mat-raised-button
          color="primary"
          type="button"
          (click)="searchUser()"
          class="margin-left-small"
        >
          Search
        </button>
      </div>

      <mat-card-actions>
        <button
          mat-raised-button
          color="primary"
          type="submit"
          [disabled]="!taskForm.valid"
        >
          {{ primaryBtnLbl }}
        </button>

        <button mat-raised-button type="reset">
          Reset
        </button>
      </mat-card-actions>
    </form>
  </mat-card-content>
</mat-card>
